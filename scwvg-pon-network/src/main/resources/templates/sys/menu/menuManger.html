<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
    <head>
        <meta charset="UTF-8">
        <title>用户管理</title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport"content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <link rel="stylesheet" href="../../../static/layui/css/layui.css" th:href="@{/layui/css/layui.css}" media="all">
        <link rel="stylesheet" href="../../../static/style/admin.css" th:href="@{/style/admin.css}" media="all">
    </head>
    <body>
        <div class="layui-fluid">
            <div class="layui-card">
                <!--header头部-->
                <div class="layui-form layui-card-header layuiadmin-card-header-auto">
                    <div class="layui-form-item">
                        <!--开始编写查询条件内如-->
                        <div class="layui-inline">
                            <label class="layui-form-label">登录账号</label>
                            <div class="layui-input-block">
                                <input class="layui-input" type="text" name="wvg_login_name" placeholder="登录用户名" autocomplete="off">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label" lay-size="sm">真实姓名</label>
                            <div class="layui-input-block">
                                <input class="layui-input" type="text" name="wvg_real_name" placeholder="真实姓名" autocomplete="off">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">电话号码</label>
                            <div class="layui-input-block">
                                <input class="layui-input" type="text" name="wvg_user_ihpone" placeholder="手机号码" autocomplete="off">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <button class="layui-btn layuiadmin-btn-useradmin" lay-submit lay-filter="LAY-user-front-search">
                                <i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
                            </button>
                            <button class="layui-btn layuiadmin-btn-useradmin" lay-submit lay-filter="add" permission="users:add">添加</button>
                            <input id="handle_status" value="" hidden="hidden">
                        </div>
                    </div>
                </div>
                <!--body中间-->
                <div class="layui-card-body">
                    <table id="menus" lay-filter="menus"></table>
                    <script type="text/html" id="operation">
                        <a class="layui-btn layui-btn-sm layui-btn-danger" lay-event="detail" permission="users:quit">踢下线</a>
                        <a class="layui-btn layui-btn-sm" lay-event="edit" id="edit" permission="users:update">编辑</a>
                        <a class="layui-btn layui-btn-warm layui-btn-sm" lay-event="reset" permission="users:update">密码重置</a>
                        <a class="layui-btn layui-btn-danger layui-btn-sm" lay-event="del" permission="users:del">删除</a>
                    </script>
                </div>
            </div>
        </div>
        <script src="../static/layui/layui.js" th:src="@{/layui/layui.js}"></script>
        <script type="text/javascript" src="../../js/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="../../js/jq.js"></script>
        <script th:inline="none">
            var token=localStorage.getItem("token");
            layui.config({
                base:"/"
            }).extend({
                index: 'lib/index'
            }).use(['index','form','useradmin','table','laydate'], function () {
                var laydate = layui.laydate;
                var form = layui.form;
                var table = layui.table;
                /*设置表头，获取数据*/
                table.render({
                    elem: '#menus',
                    sort: true,
                    smartReloadModel: true,// 是否开启智能reload的模式
                    cols: [[ //表头
                    {field: 'wvg_menu_name', title: '菜单名', width:100}
                    ,{field: 'wvg_menu_url', title: '菜单地址', width:150}
                    ,{field: 'wvg_menu_type', title: '菜单类型', width:80, sort: true}
                    ,{field: 'wvg_menu_type_name', title: '类型名称', width:130}
                    ,{field: 'wvg_menu_css', title: '菜单样式', width: 100}
                    ,{field: 'wvg_menu_state', title: '菜单状态', width: 80, sort: true}
                    ,{field: 'wvg_menu_icon', title: '菜单图标', width: 100, sort: true}
                    ,{field: 'wvg_user_id', title: '新增人', width: 80}
                    ,{field: 'wvg_menu_explain', title: '菜单说明', width: 220}
                    ]],
                    url: '/menus/menuList?token='+token, //数据接口
                    //分页
                    request:{
                        pageName: 'pageNum',
                        limitName: 'pageSize',
                        size: 5,
                        page: 1
                    },
                    //获得服务器数据
                    parseData:function(res){
                        return{
                            success:true,
                            data:res.items,
                            count:res.totalNum
                        };
                    },
                    page:{
                        page:0
                    },
                    response: {
                        statusName: 'success' //规定数据状态的字段名称，默认：code
                        ,statusCode: true //规定成功的状态码，默认：0
                    },
                    toolbar: 'default', //让工具栏左侧显示默认的内置模板
                    even: true
                });
            });
        </script>
    </body>
</html>